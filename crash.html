<!DOCTYPE html><html><body>
<h2>Crash</h2><p id="b"></p>
<button onclick="start()">Start</button>
<button onclick="take()">Take</button>
<p id="m"></p>
<a href="index.html">Назад</a>
<script>
let u=new URLSearchParams(location.search).get("u");
let coef=1; let running=false; let crashPoint=Math.random()*5+1;
b.textContent='Баланс: '+localStorage[u];
function start(){
 running=true; coef=1; crashPoint=Math.random()*5+1;
 let i=setInterval(()=>{
  if(!running)return clearInterval(i);
  coef+=0.1; m.textContent='x'+coef.toFixed(2);
  if(coef>=crashPoint){ running=false; alert('Crashed at '+coef.toFixed(2)); }
 },200);
}
function take(){
 if(!running)return;
 running=false;
 let win=100*coef;
 localStorage[u]=+localStorage[u]+win;
 alert('Выигрыш '+win);
}
</script></body></html>